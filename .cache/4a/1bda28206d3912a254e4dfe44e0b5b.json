{"id":"W70c","dependencies":[{"name":"C:\\Users\\silve\\Downloads\\s3-demo\\package.json","includedInParent":true,"mtime":1602864672900},{"name":"C:\\Users\\silve\\Downloads\\s3-demo\\.babelrc","includedInParent":true,"mtime":1602860561937},{"name":"C:\\Users\\silve\\Downloads\\s3-demo\\node_modules\\@aws-sdk\\middleware-location-constraint\\package.json","includedInParent":true,"mtime":1602864669521},{"name":"tslib","loc":{"line":1,"column":49},"parent":"C:\\Users\\silve\\Downloads\\s3-demo\\node_modules\\@aws-sdk\\middleware-location-constraint\\dist\\es\\index.js","resolved":"C:\\Users\\silve\\Downloads\\s3-demo\\node_modules\\tslib\\tslib.es6.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.locationConstraintMiddleware=n,exports.getLocationConstraintPlugin=exports.locationConstraintMiddlewareOptions=void 0;var t=require(\"tslib\");function n(n){var i=this;return function(o){return function(e){return(0,t.__awaiter)(i,void 0,void 0,function(){var i,r;return(0,t.__generator)(this,function(a){switch(a.label){case 0:return i=e.input.CreateBucketConfiguration,[4,n.region()];case 1:return r=a.sent(),i&&i.LocationConstraint||(e=(0,t.__assign)((0,t.__assign)({},e),{input:(0,t.__assign)((0,t.__assign)({},e.input),{CreateBucketConfiguration:\"us-east-1\"===r?void 0:{LocationConstraint:r}})})),[2,o(e)]}})})}}}var i={step:\"initialize\",tags:[\"LOCATION_CONSTRAINT\",\"CREATE_BUCKET_CONFIGURATION\"],name:\"locationConstraintMiddleware\"};exports.locationConstraintMiddlewareOptions=i;var o=function(t){return{applyToStack:function(o){o.add(n(t),i)}}};exports.getLocationConstraintPlugin=o;"},"sourceMaps":{"js":{"mappings":[{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":0}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":13}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":20}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":35}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":43}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":56}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":57}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":64}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":68}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":76}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":105}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":107}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":115}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":143}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":151}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":192}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":194}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":198}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":200}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":208}},{"source":"../../src/index.ts","name":null,"original":{"line":19,"column":6},"generated":{"line":1,"column":217}},{"source":"../../src/index.ts","name":null,"original":{"line":19,"column":16},"generated":{"line":1,"column":226}},{"source":"../../src/index.ts","name":null,"original":{"line":20,"column":2},"generated":{"line":1,"column":228}},{"source":"../../src/index.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":231}},{"source":"../../src/index.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":235}},{"source":"../../src/index.ts","name":null,"original":{"line":19,"column":0},"generated":{"line":1,"column":237}},{"source":"../../src/index.ts","name":null,"original":{"line":22,"column":9},"generated":{"line":1,"column":242}},{"source":"../../src/index.ts","name":null,"original":{"line":22,"column":9},"generated":{"line":1,"column":249}},{"source":"../../src/index.ts","name":null,"original":{"line":23,"column":4},"generated":{"line":1,"column":258}},{"source":"../../src/index.ts","name":null,"original":{"line":24,"column":39},"generated":{"line":1,"column":261}},{"source":"../../src/index.ts","name":null,"original":{"line":24,"column":39},"generated":{"line":1,"column":268}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":4},"generated":{"line":1,"column":277}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":280}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":287}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":289}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":291}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":302}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":309}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":316}},{"source":"../../src/index.ts","name":null,"original":{"line":25,"column":41},"generated":{"line":1,"column":318}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":329}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":333}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":335}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":337}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":344}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":346}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":348}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":361}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":366}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":375}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":378}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":385}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":387}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":394}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":399}},{"source":"../../src/index.ts","name":null,"original":{"line":29,"column":19},"generated":{"line":1,"column":401}},{"source":"../../src/index.ts","name":null,"original":{"line":27,"column":12},"generated":{"line":1,"column":408}},{"source":"../../src/index.ts","name":null,"original":{"line":27,"column":42},"generated":{"line":1,"column":410}},{"source":"../../src/index.ts","name":null,"original":{"line":27,"column":47},"generated":{"line":1,"column":412}},{"source":"../../src/index.ts","name":null,"original":{"line":27,"column":52},"generated":{"line":1,"column":418}},{"source":"../../src/index.ts","name":null,"original":{"line":29,"column":19},"generated":{"line":1,"column":444}},{"source":"../../src/index.ts","name":null,"original":{"line":29,"column":19},"generated":{"line":1,"column":445}},{"source":"../../src/index.ts","name":null,"original":{"line":29,"column":25},"generated":{"line":1,"column":447}},{"source":"../../src/index.ts","name":null,"original":{"line":29,"column":33},"generated":{"line":1,"column":449}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":459}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":464}},{"source":"../../src/index.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":466}},{"source":"../../src/index.ts","name":null,"original":{"line":29,"column":10},"generated":{"line":1,"column":473}},{"source":"../../src/index.ts","name":null,"original":{"line":29,"column":19},"generated":{"line":1,"column":475}},{"source":"../../src/index.ts","name":null,"original":{"line":29,"column":19},"generated":{"line":1,"column":477}},{"source":"../../src/index.ts","name":null,"original":{"line":30,"column":9},"generated":{"line":1,"column":484}},{"source":"../../src/index.ts","name":null,"original":{"line":30,"column":39},"generated":{"line":1,"column":487}},{"source":"../../src/index.ts","name":null,"original":{"line":30,"column":65},"generated":{"line":1,"column":489}},{"source":"../../src/index.ts","name":null,"original":{"line":31,"column":6},"generated":{"line":1,"column":510}},{"source":"../../src/index.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":1,"column":513}},{"source":"../../src/index.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":1,"column":515}},{"source":"../../src/index.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":1,"column":517}},{"source":"../../src/index.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":1,"column":528}},{"source":"../../src/index.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":1,"column":530}},{"source":"../../src/index.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":1,"column":532}},{"source":"../../src/index.ts","name":null,"original":{"line":31,"column":10},"generated":{"line":1,"column":542}},{"source":"../../src/index.ts","name":null,"original":{"line":32,"column":11},"generated":{"line":1,"column":545}},{"source":"../../src/index.ts","name":null,"original":{"line":32,"column":15},"generated":{"line":1,"column":548}},{"source":"../../src/index.ts","name":null,"original":{"line":33,"column":8},"generated":{"line":1,"column":549}},{"source":"../../src/index.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":556}},{"source":"../../src/index.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":558}},{"source":"../../src/index.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":560}},{"source":"../../src/index.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":571}},{"source":"../../src/index.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":573}},{"source":"../../src/index.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":575}},{"source":"../../src/index.ts","name":null,"original":{"line":33,"column":13},"generated":{"line":1,"column":585}},{"source":"../../src/index.ts","name":null,"original":{"line":34,"column":13},"generated":{"line":1,"column":588}},{"source":"../../src/index.ts","name":null,"original":{"line":34,"column":18},"generated":{"line":1,"column":590}},{"source":"../../src/index.ts","name":null,"original":{"line":34,"column":23},"generated":{"line":1,"column":597}},{"source":"../../src/index.ts","name":null,"original":{"line":35,"column":10},"generated":{"line":1,"column":598}},{"source":"../../src/index.ts","name":null,"original":{"line":35,"column":48},"generated":{"line":1,"column":624}},{"source":"../../src/index.ts","name":null,"original":{"line":35,"column":37},"generated":{"line":1,"column":638}},{"source":"../../src/index.ts","name":null,"original":{"line":35,"column":62},"generated":{"line":1,"column":645}},{"source":"../../src/index.ts","name":null,"original":{"line":35,"column":74},"generated":{"line":1,"column":647}},{"source":"../../src/index.ts","name":null,"original":{"line":35,"column":76},"generated":{"line":1,"column":648}},{"source":"../../src/index.ts","name":null,"original":{"line":35,"column":96},"generated":{"line":1,"column":667}},{"source":"../../src/index.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":675}},{"source":"../../src/index.ts","name":null,"original":{"line":40,"column":4},"generated":{"line":1,"column":676}},{"source":"../../src/index.ts","name":null,"original":{"line":40,"column":11},"generated":{"line":1,"column":678}},{"source":"../../src/index.ts","name":null,"original":{"line":40,"column":16},"generated":{"line":1,"column":680}},{"source":"../../src/index.ts","name":null,"original":{"line":44,"column":7},"generated":{"line":1,"column":691}},{"source":"../../src/index.ts","name":null,"original":{"line":44,"column":13},"generated":{"line":1,"column":695}},{"source":"../../src/index.ts","name":null,"original":{"line":44,"column":77},"generated":{"line":1,"column":697}},{"source":"../../src/index.ts","name":null,"original":{"line":45,"column":2},"generated":{"line":1,"column":698}},{"source":"../../src/index.ts","name":null,"original":{"line":45,"column":8},"generated":{"line":1,"column":703}},{"source":"../../src/index.ts","name":null,"original":{"line":46,"column":2},"generated":{"line":1,"column":716}},{"source":"../../src/index.ts","name":null,"original":{"line":46,"column":8},"generated":{"line":1,"column":721}},{"source":"../../src/index.ts","name":null,"original":{"line":46,"column":9},"generated":{"line":1,"column":722}},{"source":"../../src/index.ts","name":null,"original":{"line":46,"column":32},"generated":{"line":1,"column":744}},{"source":"../../src/index.ts","name":null,"original":{"line":47,"column":2},"generated":{"line":1,"column":775}},{"source":"../../src/index.ts","name":null,"original":{"line":47,"column":8},"generated":{"line":1,"column":780}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":812}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":820}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":856}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":858}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":13},"generated":{"line":1,"column":862}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":43},"generated":{"line":1,"column":864}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":44},"generated":{"line":1,"column":873}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":111},"generated":{"line":1,"column":876}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":111},"generated":{"line":1,"column":882}},{"source":"../../src/index.ts","name":null,"original":{"line":51,"column":2},"generated":{"line":1,"column":883}},{"source":"../../src/index.ts","name":null,"original":{"line":51,"column":16},"generated":{"line":1,"column":896}},{"source":"../../src/index.ts","name":null,"original":{"line":51,"column":17},"generated":{"line":1,"column":905}},{"source":"../../src/index.ts","name":null,"original":{"line":52,"column":4},"generated":{"line":1,"column":908}},{"source":"../../src/index.ts","name":null,"original":{"line":52,"column":16},"generated":{"line":1,"column":910}},{"source":"../../src/index.ts","name":null,"original":{"line":52,"column":20},"generated":{"line":1,"column":914}},{"source":"../../src/index.ts","name":null,"original":{"line":52,"column":49},"generated":{"line":1,"column":916}},{"source":"../../src/index.ts","name":null,"original":{"line":52,"column":58},"generated":{"line":1,"column":919}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":925}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":933}},{"source":"../../src/index.ts","name":null,"original":{"line":50,"column":7},"generated":{"line":1,"column":961}}],"sources":{"../../src/index.ts":"import {\n  InitializeHandler,\n  InitializeHandlerArguments,\n  InitializeHandlerOptions,\n  InitializeHandlerOutput,\n  InitializeMiddleware,\n  MetadataBearer,\n  Pluggable,\n} from \"@aws-sdk/types\";\n\nimport { LocationConstraintResolvedConfig } from \"./configuration\";\n\n/**\n * This middleware modifies the input on S3 CreateBucket requests.  If the LocationConstraint has not been set, this\n * middleware will set a LocationConstraint to match the configured region.  The CreateBucketConfiguration will be\n * removed entirely on requests to the us-east-1 region.\n */\n\nexport function locationConstraintMiddleware(\n  options: LocationConstraintResolvedConfig\n): InitializeMiddleware<any, any> {\n  return <Output extends MetadataBearer>(\n    next: InitializeHandler<any, Output>\n  ): InitializeHandler<any, Output> => async (\n    args: InitializeHandlerArguments<any>\n  ): Promise<InitializeHandlerOutput<Output>> => {\n    const { CreateBucketConfiguration } = args.input;\n    //After region config resolution, region is a Provider<string>\n    const region = await options.region();\n    if (!CreateBucketConfiguration || !CreateBucketConfiguration.LocationConstraint) {\n      args = {\n        ...args,\n        input: {\n          ...args.input,\n          CreateBucketConfiguration: region === \"us-east-1\" ? undefined : { LocationConstraint: region },\n        },\n      };\n    }\n\n    return next(args);\n  };\n}\n\nexport const locationConstraintMiddlewareOptions: InitializeHandlerOptions = {\n  step: \"initialize\",\n  tags: [\"LOCATION_CONSTRAINT\", \"CREATE_BUCKET_CONFIGURATION\"],\n  name: \"locationConstraintMiddleware\",\n};\n\nexport const getLocationConstraintPlugin = (config: LocationConstraintResolvedConfig): Pluggable<any, any> => ({\n  applyToStack: (clientStack) => {\n    clientStack.add(locationConstraintMiddleware(config), locationConstraintMiddlewareOptions);\n  },\n});\n"},"lineCount":null}},"error":null,"hash":"278913b8788258500375dd4b07d590e5","cacheData":{"env":{}}}